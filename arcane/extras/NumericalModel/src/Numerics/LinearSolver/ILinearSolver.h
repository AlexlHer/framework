// -*- tab-width: 2; indent-tabs-mode: nil; coding: utf-8-with-signature -*-
#ifndef ARCGEOSIM_NUMERICS_LINEARSOLVER_ILINEARSOLVER_H
#define ARCGEOSIM_NUMERICS_LINEARSOLVER_ILINEARSOLVER_H
/* Author : desrozis at Mon Mar 30 15:43:55 2009
 * Generated by createNew
 */

/**
 * Interface du service du module de resolution linéaire.
 * Voir \ref secLinearSolver "Description des services de solveurs linéaires" pour plus de détails
 */

#include <arcane/utils/ArcaneGlobal.h>

using namespace Arcane;

class ILinearSystemBuilder;
class ILinearSystem;

class ILinearSolver
{
 public:
  //! Type de retour de l'état du solveur
  /*! \todo Doit devenir un type complexe intérrogeable un peu à
   *  l'image des CaseOptions
   */
  struct Status
  {
    bool succeeded;
    Real residual;
    Integer iteration_count;
    Integer error ;
  };

public:
  /** Constructeur de la classe */
  ILinearSolver() 
    {
      ;
    }
  
  /** Destructeur de la classe */
  virtual ~ILinearSolver() { }
  
public:
  
  //! Initialisation
  virtual void init() = 0;
  
  //! Setting linear system builder
  virtual void setLinearSystemBuilder(ILinearSystemBuilder * builder) = 0;

  //! Getting linear system
  virtual ILinearSystem * getLinearSystem() = 0 ;

  //! Building linear system
  virtual bool buildLinearSystem() = 0 ;

  //! @name Resolution step
  //@{
  
  //! Initializing (before solve)
  virtual void start() = 0 ;
  
  //! Solving    
  virtual bool solve() = 0 ;

  //! Finalizing (after solve)
  virtual void end() = 0 ;

  //! Getting resolution status
  virtual const Status & getStatus() const = 0;

  //! Getting solution
  virtual bool getSolution() = 0 ;

  //@}
};

#endif /* ARCGEOSIM_NUMERICS_LINEARSOLVER_ILINEARSOLVER_H */
